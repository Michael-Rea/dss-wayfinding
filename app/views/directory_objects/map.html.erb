<script type="text/javascript">
  // Redirect to home page after a certain period has elapsed
  setRedirectToHome();

  $(function() {
    resizeIcons();

    $('a.btn-home').click(function(e) {
      e.preventDefault();

      var anchor = $(this), h;
      h = anchor.attr('href');
      
      $('ul.vertical-nav').animate({left: '-200%'}, 500, function() {
        window.location = h;
      })
    });
  });

  console.log("DirectoryObject#show content_for firing.");

  ready = function() {
    console.log("DirectoryObject#show content_for page:load firing.");

    $(document).on("wayfinding:ready", function() {
      //console.log("Wayfinding ready.");
      $($('a.btn-floor[data-mapId="floor1"]')[0]).addClass('active')
    });

    $(document).on("wayfinding:floorChanged", function(e, data) {
      console.log("Wayfinding indicates the floor has changed during an animation. Floor: " + data.map_id);
    });

    $(document).on("wayfinding:roomClicked", function(e, data) {
      console.log("Wayfinding indicates a room was clicked. Room: " + data.room_id);
    });

    $(document).on("wayfinding:animationComplete", function(e, data) {
      console.log("Wayfinding indicates animation is complete.");
    });

    <%
      @svg_paths = [asset_path("ssh_floor_0.svg"),
                    asset_path("ssh_floor_1.svg"),
                    asset_path("ssh_floor_2.svg"),
                    asset_path("ssh_floor_3.svg"),
                    asset_path("ssh_floor_4.svg"),
                    asset_path("ssh_floor_5.svg")]
    %>
    <%= wayfinding_plugin(@svg_paths, asset_path("dataStore-" + @origin + ".json"), @origin) %>
  };

  $(document).ready(ready);

  $(document).on("page:load", ready);

</script>


<div class="row">
      <div class="col-xs-9">
        <ul class="horizontal-nav map-actions">
          <span>Floors</span>
          <li><a href="#" data-mapId="floor0" class="btn-floor">L</a></li>
          <li><a href="#" data-mapId="floor1" class="btn-floor">1</a></li>
          <li><a href="#" data-mapId="floor2" class="btn-floor">2</a></li>
          <li><a href="#" data-mapId="floor3" class="btn-floor">3</a></li>
          <li><a href="#" data-mapId="floor4" class="btn-floor">4</a></li>
          <li><a href="#" data-mapId="floor5" class="btn-floor">5</a></li>
        </ul>
        <div id="map">
          <div id="mapLoading">
            <div id="mapLoadingInner">
              <%= image_tag("loader.gif", alt: "Loading") %>
            </div>
          </div>
        </div>
        <ul class="horizontal-nav map-actions" style="margin-top: 1em;">
          <li><a href="#" class="btn-floor icon-accessible"></a></li>
          <li><a href="#" class="btn-floor icon-repeat replay"></a></li>
        </ul>
      </div>
      <div class="col-xs-3">
    </div> <!-- col-xs-3 -->
</div> <!-- row -->
