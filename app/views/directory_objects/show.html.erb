<% content_for :javascript do %>
  <%= javascript_include_tag "jquery.wayfinding" %>
<% end %>

<script type="text/javascript">
  console.log("DirectoryObject#show content_for firing.");

  ready = function() {
    console.log("DirectoryObject#show content_for page:load firing.");

    $(document).on("wayfinding:ready", function() {
      console.log("wayfinding is now ready");
      $('#map').wayfinding('routeTo', 'R1182'); // R1131 can come from ID
    });

    $('#map').wayfinding({
      'maps': [
        {'path': '<%= asset_path "ssh_floor_0.svg" %>', 'id': 'floor0'},
        {'path': '<%= asset_path "ssh_floor_1.svg" %>', 'id': 'floor1'},
        {'path': '<%= asset_path "ssh_floor_2.svg" %>', 'id': 'floor2'},
        {'path': '<%= asset_path "ssh_floor_3.svg" %>', 'id': 'floor3'},
        {'path': '<%= asset_path "ssh_floor_4.svg" %>', 'id': 'floor4'},
        {'path': '<%= asset_path "ssh_floor_5.svg" %>', 'id': 'floor5'}
      ],
      'dataStoreCache': '<%= asset_path "datastore.json" %>',
      'path': {
        width: 3,
        color: 'cyan',
        radius: 8,
        speed: 8
      },
      'startpoint': function () {
        return 'R1152';
      },
      'defaultMap': 'floor1'
    });
  };

  $(document).ready(ready);

  $(document).on("page:load", ready);

</script>


<div class="row">
      <div class="col-xs-9">
        <div id="mapLoading">Loading</div>
        <div id="map"></div>
      </div>
      <div class="col-xs-3">
        <div id="destination-view" class="panel panel-default">
            <h1 class="panel-heading">Destination</h1>
            <div class="panel-body">
                <h2>Room </h2>
                <span>102H</span> 
                <h2>Name </h2>
                <span>102H</span> 
                <h2>Email </h2>
                <span>102H</span> 
                <h2>Phone </h2>
                <span>102H</span>
                <h2>Department </h2>
                <span>Psychology</span> 

                <h1>Search Similar<h1>
                </b> <button type="button" class="btn-xl btn btn-departments">Psychology</button>
            </div> <!-- panel body -->
        </div> <!-- destination-view -->
    </div> <!-- col-xs-3 -->
</div> <!-- row -->

