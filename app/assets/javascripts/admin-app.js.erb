"use strict";

// Support for Rails' CSRF token
var includeCSRF = function($httpProvider) {
    $httpProvider.defaults.headers.common["X-CSRF-Token"] = $("meta[name=csrf-token]").attr("content");
}

var Admin = angular.module("AdminApp", ["ngRoute", "ngSanitize", "adminServices"]);
Admin.config(includeCSRF);
Admin.config(['$routeProvider', function($routeProvider) {
    $routeProvider
        .when("/", {
            templateUrl: '<%= asset_path("admin/partials/index.html") %>',
            controller: ""
        })
        .when("/kiosk", {
            templateUrl: '<%= asset_path("admin/partials/kiosk.html") %>',
            controller: ""
        })
        .when("/svg", {
            templateUrl: '<%= asset_path("admin/partials/svg.html") %>',
            controller: "SvgCtrl"
        })
        .when("/csv", {
            templateUrl: '<%= asset_path("admin/partials/csv.html") %>',
            controller: ""
        })
        .when("/rss", {
            templateUrl: '<%= asset_path("admin/partials/rss.html") %>',
            controller: "RssCtrl"
        })
        .when("/unmatched", {
            templateUrl: '<%= asset_path("admin/partials/unmatched.html") %>',
            controller: "UnmatchedCtrl"
        })
        .when("/search-logs", {
            templateUrl: '<%= asset_path("admin/partials/search-logs.html") %>',
            controller: "SearchLogCtrl"
        })
        .when("/dir_departments", {
            templateUrl: '<%= asset_path("admin/partials/directory-departments.html") %>',
            controller: "DepartmentsCtrl"
        })
        .when("/dir_people", {
            templateUrl: '<%= asset_path("admin/partials/directory-people.html") %>',
            controller: "PeopleCtrl"
        })
        .when("/dir_people/:id", {
            templateUrl: '<%= asset_path("admin/partials/directory-people.html") %>',
            controller: "PeopleCtrl"
        })
        .when("/dir_rooms", {
            templateUrl: '<%= asset_path("admin/partials/directory-rooms.html") %>',
            controller: "RoomsCtrl"
        })
        .when("/dir_rooms/:id", {
            templateUrl: '<%= asset_path("admin/partials/directory-rooms.html") %>',
            controller: "RoomsCtrl"
        });
}]);
